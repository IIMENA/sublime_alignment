
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Sublime alignment</title>

  <script src="https://d3js.org/d3.v5.min.js"></script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>

  <link href="./css/network.css" rel="stylesheet" />
  <link href="./css/main.css" rel="stylesheet" />

  <!-- To get chosen running -->
  <script type="text/javascript">
   $(document).ready(function () {
    $('.all_render_widgets').chosen();
  });
</script>




<style type="text/css">
/*so that select inputs span 100% of horizontal space*/
select{
  width: 100%;
}
.slider{
  width: 60%;
}

</style>


</head>

<body>

<h1 class="h2">Sublime alignment</h1>

<div class="container-fluid">
    <div class="row">
      <div class="col-md-4">
         <select class="all_render_widgets gc_select_widgets" id="org_selector" data-placeholder="Choose an organism" multiple tabindex="4"></select>
         <select class="all_render_widgets gc_select_widgets" id="product_selector" data-placeholder="Choose a product class" multiple tabindex="4"></select>
          <select class="all_render_widgets gc_select_widgets" id="region_or_cluster_selector" data-placeholder="Choose regions and/or clusters" multiple tabindex="4">
            <option value="show_regions" selected>Regions</option>
            <option value="show_clusters">Clusters</option>
            <!-- <option value="show_regions_and_clusters">Regions and clusters</option> -->
          </select>
         <select class="all_render_widgets" id="gene_cluster_highlighter" data-placeholder="Choose a gene cluster to highlight" multiple tabindex="4"></select>
         <select id="color_selector" data-placeholder="Choose object to highlight" class="all_render_widgets">
            <option value="none">None</option>
            <option value="family">Family</option>
            <option value="mibig">MIBiG</option>
            <option value="species">Species</option>
            <option value="product_class">Product class</option>
        </select>
        <select class="all_render_widgets gc_select_widgets" id="mibig_selector" data-placeholder="Add any known gene cluster from MIBiG"  multiple tabindex="4"></select>
        <select class="all_render_widgets gc_sub_widgets" id="mibig_selector_subset" data-placeholder="Add from a subset that hits selection"  multiple tabindex="4"></select>
        <div width="100%">
          <span>Alignment cutoff:</span>
          <!-- <p id="cutoff_displayed_value">20</p> -->
          <!-- <div id="cutoff_displayed_container"></div> -->
          <span id="cutoff_displayed_value">20</span>
        <input type="range" min="0" max="100" value="20" step="1" class="slider" id="myRange">
        </div>

        <div width="100%">
          <span>Edge cutoff:</span>
          <!-- <p id="cutoff_displayed_value">20</p> -->
          <!-- <div id="cutoff_displayed_container"></div> -->
          <span id="edge_cutoff_displayed_value">0</span>
        <input type="range" min="0" max="100" value="0" step="1" class="slider" id="edgeCutoff">
        </div>

        <div>
          <span>Value of selected edge:</span>
          <span id="current_edge_value"></span>
        </div>

        <div>
          <div id="network_tooltip" class="hidden">
            <p>Name: <span id="name"></span></p>
            <p>Family: <span id="family"></span></p>
            <p>Product: <span id="product"></span></p>
          </div>

          <!-- <div id="loading-message">Loading, please wait...</div> -->
          <div class="border border-secondary">
          <svg id="network" width=100% height="400">
          </svg>
          </div>
      </div>


      </div>


      <div class="col-md-8" id="alignment_div">
    <div class="row">

      <div id="selector_tooltip" class="hidden">
          <p><span id="origin">Origin</span></p>
      </div>

    <svg id="controls_svg" width=5% height="600"></svg>
    

      <div id="gene_tooltip" class="hidden">
        <p>Locus tag:<span id="cds_locus_tag"></span></p>
        <p><span id="cds_product"></span></p>
        <p>Location: <span id="cds_start"></span>..<span id="cds_end"></span></p>
      </div>

      <div id="alignment_tooltip" class="hidden">
        <p><span id="alignment_from_name">n.a.</span>: <span id="alignment_from_start">n.a.</span>..<span id="alignment_from_end">n.a.</span></p>
        <p><span id="alignment_to_name">n.a.</span>: <span id="alignment_to_start">n.a.</span>..<span id="alignment_to_end">n.a.</span></p>
        <p>Identity: <span id="alignment_pident">n.a.</span>%</p>
      </div>

    <svg id="alignment_svg" width=95% height="600"></svg> 
    </div>
    </div>




    </div>
</div>



      <div>
      <p>Please select one of the pre-loaded species using the first input field and add a secondary metabolite gene cluster class in the second field. The network shows hits in all-vs-all protein alignments. Select multiple nodes in the network by click to show the alignment imposed on the gene cluster.</p>
      <p>This work has been funded by the Novo Nordisk Foundation Challenge Grant <a href="http://iimena.org/">Iimena</a> </p>
      </div>





<script type="module">
  import {start_network} from "./main.js";
  $(document).ready(function () {
    start_network();
  });
</script>

</body>
</html>
